FROM gradle:8.10-jdk21

WORKDIR /app

# Gradle Wrapper 및 설정 파일 복사
COPY . .

# 실행 권한 부여
RUN chmod +x gradlew

# 의존성 미리 다운로드 (선택사항, 빌드 속도 개선)
RUN ./gradlew dependencies --no-daemon || true

# 포트 노출
EXPOSE 8080

# 개발 모드로 실행
ENTRYPOINT ["./gradlew", "bootRun", "--no-daemon", "--continuous"]